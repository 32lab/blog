<!DOCTYPE html>
<html th:replace="~{layout/layout.html :: layout(~{::head}, ~{::section})}"
      lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Jinia's Log - </title>
    <!-- SEO -->
    <meta name="description" content=""/>
    <meta name="keyword" content=""/>
    <meta name="author" content="jinia"/>
    <meta name="viewport" content="width=device-width,  user-scalable = no, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

    <!-- OPEN GRAPH(FACEBOOK, LINKEDIN) -->
    <meta property="og:type" content=""/>
    <meta property="og:description" content=""/>
    <meta property="og:title" content=""/>
    <meta property="og:image" content=""/>
    <meta property="og:url" content=""/>
    <meta property="og:site_name" content=""/>

    <!-- twitter -->
    <meta property="twitter:card" content=""/>
    <meta property="twitter:title" content=""/>
    <meta property="twitter:description" content=""/>
    <meta property="twitter:image" content=""/>
    <meta property="twitter:url" content=""/>
    <meta property="twitter:creator" content=""/>

    <link rel="icon" href=""/>
    <link rel="apple-touch-icon" href=""/>
    <link rel="short icon" type="image/x-icon" href=""/>

    <!-- CSS RESET -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"/>
    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/mainCss.css"/>

    <script src="https://kit.fontawesome.com/233840a552.js" crossorigin="anonymous"></script>
</head>

<body>

<section>

    <div style="margin-bottom: 150px"></div>

    <div class="recent-cards mt-5 ms-4 me-4">

        <div class="cards-container container p-0" id="infiniteScrollBox">
            <h1 class="text-center" th:text="${param.category}">최신 포스팅</h1>
            <hr>
            <div id="articlePage-0">
                <div class="card mb-3 recent-card wow fadeInUp" th:each="article :${articleList.getContent()}">
                    <a th:href="@{/article/view(articleId=${article.getId()})}">
                        <div class="row g-0">
                            <div class="col-3">
                                <div class="ratio ratio-1x1"
                                     th:style="|background-image: url(${article.getThumbnailUrl()}); background-size: cover;|"></div>
                            </div>
                            <div class="col-9 row row-cols-1 align-self-center">
                                <h3 class="card-title col mb-3 text-truncate" th:text="${article.getTitle()}">글 제목</h3>
                                <p class="col mb-0">
                                    <small class="text-muted"
                                           th:text="|작성일 : ${#temporals.format(article.getCreatedDate(), 'yyyy-MM-dd')}|"></small>
                                </p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            <!--     infinityScroll     -->
            <div id="nextPagination"></div>

        </div>
    </div>


    <!-- page s -->
    <div class="pagination-section mt-4">
        <nav class="pagination-outer" aria-label="Page navigation">
            <ul class="pagination">
                <li class="page-item">
                    <a class="page-link" aria-label="First"
                       th:href="@{/article/list(category=(${param.category}),tier=(${param.tier}),page=(1))}"
                       th:if="${pagingBox.getCurPageNum()}>5">
                        <span>«</span>
                    </a>
                </li>

                <li class="page-item">
                    <a class="page-link" aria-label="Previous"
                       th:href="@{/article/list(category=(${param.category}),tier=(${param.tier}),page=(${pagingBox.getCurPageNum()}-5))}"
                       th:if="${pagingBox.getCurPageNum()}>5">
                <span>
                  < </span>
                    </a>
                </li>

                <th:block th:each="page : ${#numbers.sequence(pagingBox.getBoxStartNum(), pagingBox.getBoxEndNum())}">
                    <li th:if="${pagingBox.getCurPageNum()==page}" class="page-item active">
                        <a th:text="${page}" class="page-link"
                           th:href="@{/article/list(category=(${param.category}),tier=(${param.tier}),page=(${page}))}"></a>
                    </li>
                    <li th:unless="${pagingBox.getCurPageNum()==page}" class="page-item">
                        <a th:text="${page}" class="page-link"
                           th:href="@{/article/list(category=(${param.category}),tier=(${param.tier}),page=(${page}))}"></a>
                    </li>
                </th:block>
                <li class="page-item">
                    <a class="page-link" aria-label="Next"
                       th:href="@{/article/list(category=(${param.category}),tier=(${param.tier}),page=(${pagingBox.getCurPageNum()}+5))}"
                       th:if="${pagingBox.getCurPageNum()<=pagingBox.getPNumForNextBtn()}"
                    >
                        <span aria-hidden="true">></span>
                    </a>
                </li>

                <li class="page-item">
                    <a class="page-link" aria-label="Last"
                       th:href="@{/article/list(category=(${param.category}),tier=(${param.tier}),page=(${pagingBox.getLastPageNum()}))}"
                       th:if="${pagingBox.getCurPageNum()<=pagingBox.getPNumForNextBtn()}"
                    >
                        <span aria-hidden="true">»</span>
                    </a>
                </li>


            </ul>
        </nav>
    </div>
    <!--page e-->

</section>

</body>
</html>